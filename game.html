<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Hit & Blow</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=M+PLUS+1p:wght@400;700;800&display=swap" rel="stylesheet">
    
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
    
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <div class="top-header">
        <div class="player-info mine">
            <div class="avatar"><img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23fff'><path d='M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z'/></svg>" width="40"></div>
            <div class="player-details"><div class="player-name">あなた</div></div>
        </div>
        <div class="turn-order-badge"><div class="order-label mine" id="badgeP1">先手</div><div class="order-label opp" id="badgeP2">後手</div></div>
        <div class="player-info opp">
            <div class="player-details"><div class="player-name" id="oppName">???</div></div>
            <div class="avatar"><img src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23fff'><path d='M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z'/></svg>" width="40"></div>
        </div>
    </div>

    <div class="main-content">
        <div id="lobbyArea" class="overlay-screen">
            <div id="friendLobby" class="hidden lobby-content">
                <div class="overlay-title">合言葉(数字4桁)を入力</div>
                <div id="loginDisplay" class="overlay-input">____</div>
                <div class="overlay-status">友達と同じ番号を入れてね</div>
            </div>
            <div id="randomLobby" class="hidden lobby-content">
                <div id="searchBtnContainer"><button class="match-btn" onclick="window.startRandomMatching()">対戦相手を探す</button></div>
                <div id="searchingContainer" class="loader-container hidden"><div class="spinner"></div><div class="loading-text">検索中...</div><p style="font-size:12px; margin-top:10px;">(画面を閉じずにお待ちください)</p></div>
            </div>
        </div>
        <div id="matchedOverlay" class="matched-overlay hidden"><div class="matched-text">MATCHED!</div><div class="vs-text">GAME START</div></div>
        <div id="setupArea" class="overlay-screen hidden">
            <div class="setup-title">あなたの番号を決めてください</div>
            <div id="setupDisplay" class="setup-input">_ _ _</div>
            <div id="setupStatus" class="overlay-status hidden">相手を待っています...</div>
        </div>
        <div id="gameArea" class="hidden">
            <div class="secret-area">
                <div class="num-cards mine" id="mySecretCards"><div class="num-card">?</div><div class="num-card">?</div><div class="num-card">?</div></div>
                <div class="num-cards opp"><div class="num-card question">?</div><div class="num-card question">?</div><div class="num-card question">?</div></div>
            </div>
            <div class="history-container">
                <div class="history-col mine"><div class="history-header"><div class="h-head-left">あなたの推理</div><div class="h-head-hb">H</div><div class="h-head-hb">B</div></div><div class="history-list" id="playerLogList"><div class="h-row placeholder"><div class="h-num">- - -</div></div></div></div>
                <div class="history-col opp"><div class="history-header"><div class="h-head-left">相手の推理</div><div class="h-head-hb">H</div><div class="h-head-hb">B</div></div><div class="history-list" id="oppLogList"><div class="h-row placeholder"><div class="h-num">- - -</div></div></div></div>
            </div>
        </div>
    </div>

    <div class="footer-area">
        <div class="footer-bg-curve"></div>
        <div class="status-bar"><div class="timer-circle" id="timerDisplay">60</div><div class="input-status-container"><div class="game-message" id="gameMessage">Hit & Blow</div><div class="input-display-box" id="footerInputDisplay">_ _ _</div></div></div>
        <div class="keypad-area">
            <button class="key-btn" data-key="0">0</button><button class="key-btn" data-key="1">1</button><button class="key-btn" data-key="2">2</button><button class="key-btn" data-key="3">3</button><button class="key-btn" data-key="4">4</button>
            <button class="key-btn" data-key="5">5</button><button class="key-btn" data-key="6">6</button><button class="key-btn" data-key="7">7</button><button class="key-btn" data-key="8">8</button><button class="key-btn" data-key="9">9</button>
        </div>
        <div class="ctrl-area"><button class="ctrl-btn del-btn" data-key="del">DEL</button><button class="ctrl-btn call-btn disabled" data-key="call" id="callBtn">決定</button></div>
    </div>

    <script src="js/game_core.js"></script>
    <script src="js/logic_cpu.js"></script>
    <script src="js/online/auth.js"></script>
    <script src="js/online/match.js"></script>
    <script src="js/online/battle.js"></script>
</body>
</html>
